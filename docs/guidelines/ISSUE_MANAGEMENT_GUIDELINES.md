# 課題管理と進捗追跡ガイドライン

## 【必須】課題管理と進捗追跡

## 🔍 作業開始時の必須チェック

**新しい作業を開始する前に、必ずISSUES.mdを確認してください。**

```bash
# 作業開始時に実行
cat ISSUES.md | head -50  # 優先課題の確認
```

### チェック項目
- [ ] **現在の優先課題を確認**: 🔴高優先度 → 🟡中優先度 → 🟢低優先度 の順
- [ ] **実装状況を確認**: ✅完了済み機能と❌未実装機能の把握
- [ ] **関連ファイルの確認**: 該当ファイルが既に存在するか確認
- [ ] **前提条件の確認**: 依存する機能が実装済みか確認

## 🔄 作業開始前の実装状況確認（必須）

**チケットに着手する前に、必ず現在の実装状況を確認してください。**

```bash
# 実装状況確認手順
# 1. モデル実装の確認
rg -n "class Character" accounts/models.py accounts/character_models.py

# 2. テスト作成状況の確認
ls -la accounts/test_character_*.py accounts/test_*_management.py

# 3. UI実装の確認
rg -n "技能ポイント|装備|背景情報|成長記録" templates/accounts/character_*.html

# 4. API実装の確認
rg -n "CharacterSheet" accounts/views/

# 5. マイグレーション確認
ls -la accounts/migrations/*character*.py accounts/migrations/*background*.py
```

### 実装状況の正確な把握
1. **モデル層**: 実装済みか、フィールド定義のみか
2. **ビュー層**: APIエンドポイントが実装済みか
3. **テンプレート層**: UIが実装済みか
4. **テスト**: テストが作成済みか、実行成功しているか

## 📝 作業完了時の必須更新

**作業完了後は、必ずISSUES.mdの進捗を更新してください。**

### 更新手順
1. **該当ISSUE-XXXの状態更新**
   - ✅実装完了: `### ✅ ISSUE-XXX: 機能名（解決済み）`
   - 🔄部分完了: `- ✅ **基本機能** - 実装済み`、`- ❌ **詳細機能** - 未実装`

2. **解決日の記録**
   ```markdown
   - **解決日**: 2025年6月18日
   ```

3. **実装詳細の記録**
   ```markdown
   - **実装内容**:
     - ✅ **基本機能A** - 実装済み
     - ✅ **機能B** - 実装済み
     - ❌ **拡張機能C** - 未実装
   ```

4. **テスト結果の更新**
   ```markdown
   ### 統合テスト結果サマリー (2025年6月18日最新)
   - **総テストスイート数**: 16
   - **成功**: 16 (100.0%)
   ```

5. **課題クローズ処理**（完全実装完了時）
   ```bash
   # 完全実装完了時のクローズ処理
   python3 scripts/close_issue.py ISSUE-XXX
   ```

6. **次期優先順位の調整**
   - 完了した課題を次のステップから削除
   - 新たに判明した課題を追加

## 🗂️ 課題クローズ管理

### 完全実装完了時の処理
機能が完全に実装完了し、テストも100%成功した場合：

```bash
# 1. 課題クローズスクリプト実行
python3 scripts/close_issue.py ISSUE-XXX

# 2. 仕様書自動更新確認
grep -A 10 "ISSUE-XXX" SPECIFICATION.md

# 3. 統計更新確認
head -20 ISSUES.md
```

### クローズ処理の効果
- **ISSUES.md**: 完了済み課題を削除、統計更新
- **ISSUES_CLOSED.md**: 完了済み課題をアーカイブ
- **SPECIFICATION.md**: 実装詳細を仕様書に記載
- **統計情報**: 進捗率と完了数の自動更新

### 対象ファイル
- **現在進行中**: `ISSUES.md` - 日常開発で参照
- **完了済み**: `ISSUES_CLOSED.md` - 履歴確認時のみ参照
- **実装仕様**: `SPECIFICATION.md` - 実装詳細の永続記録

## 🎯 進捗管理のベストプラクティス

### 作業開始時
```bash
# 1. 課題確認
echo "=== 📋 ISSUES.md確認 ==="
grep -A 5 "次の最優先課題" ISSUES.md

# 2. 関連ファイル確認
echo "=== 📁 関連ファイル確認 ==="
ls -la accounts/models.py accounts/views.py templates/accounts/

# 3. テスト状況確認
echo "=== 🧪 テスト状況確認 ==="
python3 manage.py test --dry-run | tail -5
```

### 作業完了時
```bash
# 1. テスト実行
python3 manage.py test

# 2. 進捗更新
echo "=== 📝 ISSUES.md更新 ==="
# ISSUES.mdを編集して進捗を更新

# 3. 完了通知
echo "✅ 課題XXX完了 - ISSUES.md更新済み" && echo -e "\a\a\a"
```

## 🚨 必須ルール

1. **ISSUES.md確認なしでの作業開始禁止**
   - 重複作業や優先順位間違いを防止

2. **進捗更新なしでの作業完了禁止**
   - チーム内での進捗共有とトラッキング確保

3. **実装状況の正確な記録**
   - ✅/❌を正確に記録し、後続作業の判断材料とする

4. **テスト結果の必須更新**
   - 品質保証と回帰テスト防止のため

## 📊 課題管理ファイル

すべての課題とチケットは `ISSUES.md` ファイルで管理されています。
新しい課題を発見した場合は、ISSUES.mdファイルに適切な優先度とカテゴリで追加してください。

**重要**: ISSUES.mdは開発の中央管理ファイルです。常に最新状態を保ってください。

## 📈 進捗レポートのフォーマット

### 日次進捗レポート
```markdown
## 日次進捗レポート - [日付]

### 本日の作業内容
- ISSUE-XXX: [作業内容]
  - 進捗: XX%
  - 残作業: [残作業内容]

### 完了したタスク
- ✅ ISSUE-XXX: [完了内容]

### 明日の予定
- ISSUE-XXX: [予定作業]

### ブロッカー
- [ブロッカー内容]
```

### 週次進捗レポート
```markdown
## 週次進捗レポート - [週番号]

### 今週の成果
- ✅ 完了課題数: X件
- 🔄 進行中課題数: X件
- ❌ 未着手課題数: X件

### 主要な完了事項
1. ISSUE-XXX: [完了内容]
2. ISSUE-XXX: [完了内容]

### 来週の優先事項
1. ISSUE-XXX: [予定内容]
2. ISSUE-XXX: [予定内容]

### リスクと懸念事項
- [リスク内容]
```

## 🔔 通知とリマインダー

### 作業完了時の通知
```bash
# 作業完了時の音声通知
echo "✅ 課題XXX完了 - ISSUES.md更新済み" && echo -e "\a\a\a"

# 品質ゲート通過通知
echo "✅ 品質ゲート通過 - 実装完了!" && echo -e "\a\a\a"

# Arkham Nexus機能完全実装通知
echo "🐙 クトゥルフ神話TRPG機能実装完了!" && \
for i in {1..3}; do echo -e "\a"; sleep 0.5; done
```

### 定期リマインダー
- **毎朝**: ISSUES.md確認
- **作業開始時**: 実装状況確認
- **作業完了時**: 進捗更新
- **週末**: 週次レポート作成