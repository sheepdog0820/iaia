# キャラクター一覧画面仕様書

## 概要
ユーザーが作成した自分のキャラクターシートの一覧を表示する画面。

## 機能要件

### 1. アクセス制御
- **認証**: ログインユーザーのみアクセス可能
- **権限**: 自分が作成したキャラクターのみ表示される
- **他ユーザー制限**: 他のユーザーが作成したキャラクターは表示されない

### 2. 表示項目

#### 2.1 ヘッダー部
- **画面タイトル**: 「キャラクターシート一覧」
- **新規作成ボタン**: ドロップダウンメニューで版を選択
  - 6版キャラクター作成（現在実装済み）

#### 2.2 フィルタリング機能
- **版選択**: ラジオボタン
  - 全て（デフォルト）
  - 6版
- **検索**: キャラクター名での部分一致検索

#### 2.3 キャラクターカード
各キャラクターは以下の情報を含むカード形式で表示：

##### 基本情報
- **キャラクター画像**: 
  - サイズ: 200px × 200px（object-fit: contain）
  - デフォルト画像: `/static/images/default-character.svg`
  - エラー時の代替画像表示
- **キャラクター名**: カードタイトルとして表示
- **版バッジ**: 6版（青色バッジ）
- **ステータスバッジ**: 
  - 生存（緑）
  - 死亡（黒）
  - 発狂（黄）
  - 重傷（赤）
  - 行方不明（灰）
  - 引退（水色）

##### 詳細情報
- **職業**: 未設定の場合は「未設定」と表示
- **年齢**: 歳単位で表示
- **バージョン**: キャラクターシートのバージョン番号

##### ステータス表示
3列のグリッドレイアウトで表示：
- **HP**: 現在値/最大値（赤色）
- **MP**: 現在値/最大値（青色）
- **SAN**: 現在値/最大値（黄色）

##### 操作ボタン
- **詳細**: キャラクター詳細画面へ遷移
- **編集**: キャラクター編集画面へ遷移
- **複製**: 新しいバージョンを作成

### 3. レイアウト

#### 3.1 グリッドレイアウト
- デスクトップ: 3列表示（col-lg-4）
- タブレット: 2列表示（col-md-6）
- モバイル: 1列表示

#### 3.2 空の状態
キャラクターが存在しない場合：
- アイコン表示
- 「キャラクターシートがありません」メッセージ
- 「6版キャラクター作成」ボタン

#### 3.3 ローディング表示
- データ読み込み中はスピナーを表示

## 技術仕様

### 1. API エンドポイント
- **GET** `/api/accounts/character-sheets/`
  - 認証ユーザーのキャラクター一覧を取得
  - レスポンス: キャラクターシートの配列

### 2. フロントエンド実装
- **フレームワーク**: Vanilla JavaScript + Axios
- **スタイル**: Bootstrap 5
- **画像処理**: 
  - デフォルト画像パス: 静的ファイルから取得
  - エラーハンドリング: onerror属性で代替画像を設定

### 3. データ構造
```javascript
{
  id: number,
  name: string,
  edition: string,
  status: string,
  occupation: string,
  age: number,
  version: number,
  character_image: string | null,
  current_hp: number,
  max_hp: number,
  current_mp: number,
  max_mp: number,
  current_san: number,
  max_san: number,
  created_at: string,
  updated_at: string
}
```

### 4. セキュリティ
- CSRFトークンの送信
- 認証チェック（401エラー時はログイン画面へリダイレクト）
- XSS対策: HTMLエスケープ処理

## 非機能要件

### 1. パフォーマンス
- 一覧表示は100件まで対応
- 画像の遅延読み込みは現在未実装

### 2. レスポンシブデザイン
- モバイル、タブレット、デスクトップに対応
- タッチデバイスでの操作に配慮

### 3. アクセシビリティ
- 適切なaria-labelの設定
- キーボード操作対応
- スクリーンリーダー対応

## 今後の拡張予定
- 7版対応（現在開発保留中）
- ページネーション機能
- ソート機能（作成日、更新日、名前順）
- お気に入り機能
- タグ付け機能