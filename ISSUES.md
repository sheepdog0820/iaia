# 🎯 Arkham Nexus - 課題管理チケット（未完了）

## 📋 概要
未完了の課題のみを管理します。完了済みは `ISSUES_CLOSED.md` に移動済みです。

---

## 🔴 優先度: 高

### ISSUE-022: X（Twitter）OAuth API認証の実装
- **カテゴリ**: 新機能実装
- **影響範囲**: API認証
- **詳細**:
  - X（Twitter）OAuthをAPI経由で利用するための認証機能
  - django-allauthとDjango REST Frameworkの統合
- **該当ファイル**:
  - `arkham_nexus/settings.py` - X OAuth設定
  - `accounts/views/auth_views.py` - X OAuth認証ビューの実装
  - `accounts/serializers.py` - X OAuth認証シリアライザー
- **実装内容**:
  - ❌ **X Developer Portal設定** - OAuth 2.0アプリケーション作成
  - ❌ **X OAuth APIエンドポイント** - /api/auth/twitter/
  - ❌ **Xトークン検証** - X OAuth2 APIでのトークン検証
  - ❌ **ユーザー情報取得** - Xプロフィール情報の取得
  - ❌ **APIトークン生成** - 認証成功後のDRFトークン生成
- **作成日**: 2025年7月3日

---

## 🟡 優先度: 中

### ISSUE-006: グループ統計APIの詳細実装
- **カテゴリ**: 機能強化
- **影響範囲**: グループ管理機能
- **詳細**:
  - `/api/accounts/statistics/groups/` - グループ統計API
  - 現在基本実装済み、詳細機能の追加が必要
- **該当ファイル**:
  - `accounts/statistics_views.py` - GroupStatisticsView実装済み
- **実装内容**:
  - ✅ **基本グループ統計** - 実装済み
  - ❌ **グループ活動サマリー詳細** - 未実装
  - ❌ **メンバー参加率分析** - 未実装
  - ❌ **人気シナリオランキング** - 未実装

### ISSUE-007: ユーザーランキングAPIの詳細実装
- **カテゴリ**: 機能強化
- **影響範囲**: 統計機能
- **詳細**:
  - `/api/accounts/statistics/ranking/` - ユーザーランキングAPI
  - 現在基本実装済み、詳細機能の追加が必要
- **該当ファイル**:
  - `accounts/statistics_views.py` - UserRankingView実装済み
- **実装内容**:
  - ✅ **基本ランキング機能** - 実装済み
  - ❌ **期間別ランキング** - 未実装
  - ❌ **カテゴリ別ランキング** - 未実装
  - ❌ **ランキング推移** - 未実装

### ISSUE-014: セッションノート・ログシステム
- **カテゴリ**: 新機能実装
- **影響範囲**: セッション管理機能
- **詳細**:
  - セッション終了後の記録管理機能
  - GMプライベートノート、公開サマリー、プレイログの実装
- **該当ファイル**:
  - `schedules/models.py` - SessionNote, SessionLogモデル追加必要
  - `schedules/views.py` - ノート管理APIの実装
  - `templates/schedules/session_detail.html` - UI実装
- **実装内容**:
  - ✅ **SessionNoteモデル** - 実装済み
  - ✅ **GMプライベートノート機能** - API実装済み
  - ✅ **セッションサマリー機能** - API実装済み
  - ✅ **プレイログ時系列記録** - API実装済み（SessionLog）
  - ✅ **NPCメモ管理** - API実装済み
  - ❌ **セッション詳細UIへの組み込み** - 未実装
- **優先理由**: TRPGプレイヤーから最も要望が多い機能

### ISSUE-016: セッション素材管理システム
- **カテゴリ**: 新機能実装
- **影響範囲**: セッション管理機能
- **詳細**:
  - マップ、音楽、画像などのセッション素材を一元管理
  - 外部サービスリンク集約
- **該当ファイル**:
  - `schedules/models.py` - SessionResourceモデル追加
  - `schedules/views.py` - 素材管理API
  - `templates/schedules/session_resources.html` - 素材管理UI
- **実装内容**:
  - ❌ **SessionResourceモデル** - 未実装
  - ✅ **画像アップロード機能** - 実装済み（SessionImage）
  - ❌ **音楽ファイル管理** - 未実装
  - ❌ **外部URL管理機能** - 未実装
  - ❌ **素材カテゴリ分類** - 未実装
  - ❌ **素材プレビュー機能** - 未実装
- **更新日**: 2025年6月25日

---

## 🟢 優先度: 低

### ISSUE-010: テストカバレッジの向上
- **カテゴリ**: テスト改善
- **影響範囲**: 全体
- **詳細**:
  - 現在基本テストは実装済み、詳細テストの追加が必要
- **該当ファイル**:
  - 各種テストファイル (test_*.py)
- **実装内容**:
  - ✅ **基本機能テスト** - 実装済み
  - ✅ **統合テスト** - 実装済み (100%成功率)
  - ❌ **境界値テスト** - 未実装
  - ❌ **エラーケーステスト強化** - 未実装
  - ❌ **パフォーマンステスト** - 未実装

### ISSUE-011: APIドキュメント自動生成
- **カテゴリ**: ドキュメント
- **影響範囲**: API全般
- **詳細**:
  - OpenAPI/Swagger対応でAPI仕様書の自動生成
- **実装内容**:
  - ❌ **drf-spectacular導入** - 未実装
  - ❌ **エンドポイント説明追加** - 未実装
  - ❌ **スキーマ生成設定** - 未実装

### ISSUE-012: 非同期処理の導入検討
- **カテゴリ**: パフォーマンス改善
- **影響範囲**: 統計処理、エクスポート機能
- **詳細**:
  - 重い統計処理やエクスポート処理の非同期化
- **実装内容**:
  - ❌ **Celery導入** - 未実装
  - ❌ **バックグラウンドタスク** - 未実装
  - ❌ **進捗表示機能** - 未実装

### ISSUE-017: 高度なスケジューリング機能
- **カテゴリ**: 新機能実装
- **影響範囲**: スケジュール管理機能
- **詳細**:
  - 定期セッション設定、キャンペーン管理
  - 参加可能日投票、タイムゾーン対応
- **該当ファイル**:
  - `schedules/models.py` - SessionSeries, SessionAvailabilityモデル追加
  - `schedules/views.py` - 定期セッション管理API
  - `templates/schedules/recurring_session.html` - 定期セッション設定UI
- **実装内容**:
  - ❌ **SessionSeriesモデル** - 未実装
  - ❌ **定期セッション自動作成** - 未実装
  - ❌ **参加可能日投票機能** - 未実装
  - ❌ **タイムゾーン変換対応** - 未実装
  - ❌ **キャンペーン連続セッション管理** - 未実装

### ISSUE-018: セッションYouTubeリンク機能
- **カテゴリ**: 新機能追加
- **影響範囲**: セッション管理
- **詳細**:
  - 複数のYouTube動画をセッションにリンク
  - 動画情報の自動取得（タイトル、再生時間、サムネイル）
  - 各動画への備考追加機能
- **実装内容**:
  - ✅ **仕様書作成** - 完了（SESSION_YOUTUBE_LINKS_SPECIFICATION.md）
  - ❌ **データモデル実装** - 未実装（SessionYouTubeLink）
  - ❌ **YouTube API連携** - 未実装
  - ❌ **CRUD API実装** - 未実装
  - ❌ **UI実装** - 未実装
- **作成日**: 2025年6月25日

### ISSUE-023: セッション準備・事後処理ツール
- **カテゴリ**: 新機能実装
- **影響範囲**: セッション管理機能
- **備考**: 旧ISSUE-018（番号重複のため再割当）
- **詳細**:
  - GM向けセッション準備支援
  - セッション後のフィードバック、XP配布機能
- **該当ファイル**:
  - `schedules/models.py` - SessionPreparation, SessionFeedbackモデル
  - `schedules/views.py` - 準備・フィードバックAPI
  - `templates/schedules/session_preparation.html` - 準備画面UI
- **実装内容**:
  - ❌ **準備チェックリスト機能** - 未実装
  - ❌ **セッションテンプレート** - 未実装
  - ❌ **フィードバックシステム** - 未実装
  - ❌ **経験値配布機能** - 未実装
  - ❌ **アイテム・報酬管理** - 未実装

### ISSUE-019: セッション分析ダッシュボード
- **カテゴリ**: 新機能実装
- **影響範囲**: 統計・分析機能
- **詳細**:
  - セッションデータの統計分析とビジュアライゼーション
  - 参加率、人気時間帯、GM負荷分析
- **該当ファイル**:
  - `schedules/analytics_views.py` - 分析API（新規作成）
  - `templates/schedules/analytics_dashboard.html` - ダッシュボードUI
- **実装内容**:
  - ❌ **参加率分析機能** - 未実装
  - ❌ **人気時間帯分析** - 未実装
  - ❌ **セッション時間推移グラフ** - 未実装
  - ❌ **GM負荷分析** - 未実装
  - ❌ **プレイヤー相性分析** - 未実装

### ISSUE-013: 通知機能の拡張
- **カテゴリ**: 新機能実装
- **影響範囲**: 全体
- **詳細**:
  - 現在ハンドアウト通知機能は実装済み、他の通知機能の追加が必要
- **該当ファイル**:
  - `schedules/notification_views.py` - 基本実装済み
  - `schedules/models.py` - UserNotificationPreferences実装済み
- **実装内容**:
  - ✅ **ハンドアウト通知** - 実装済み
  - ✅ **セッション招待通知** - 実装完了（2025年6月20日）
  - ✅ **スケジュール変更通知** - 実装完了（2025年6月20日）
  - ❌ **フレンドリクエスト通知** - 未実装
  - ❌ **リアルタイム通知** - 未実装
- **実装詳細**:
  - SessionNotificationService: セッション関連通知サービスクラス追加
  - セッション招待、スケジュール変更、キャンセル、リマインダー通知実装
  - HandoutNotificationモデルを拡張（新しい通知タイプとmetadataフィールド）
  - TRPGSessionViewSetにinviteアクションと自動通知機能追加
- **更新日**: 2025年6月20日

---

## 📊 進捗管理

### 統合テスト結果サマリー (2025年6月18日最新)
- **総テストスイート数**: 16
- **成功**: 16 (100.0%)
- **失敗**: 0 (0.0%)
- **CCFOLIA専用テスト**: 28件全て成功

### 主要機能の動作確認状況
- ✅ ユーザー認証・権限管理
- ✅ セッション管理・参加者管理
- ✅ シナリオ管理・プレイ履歴
- ✅ グループ管理（プライベート・パブリック両対応）
- ✅ デモログイン機能
- ✅ APIエラーハンドリング
- ✅ ハンドアウト一括管理機能
- ✅ 統計・エクスポート機能（新仕様）
- ✅ CCFOLIA連携機能（完全実装）
- ✅ クトゥルフ神話TRPG 6版キャラクターシート（基本機能）
- ✅ 通知機能（ハンドアウト、セッション招待、スケジュール変更）
- ✅ カレンダー統合API（月別イベント、集約、iCal形式）
- ✅ 詳細統計機能（Tindalos拡張）

### 未完了チケット数
- **高優先度**: 1件
- **中優先度**: 4件
- **低優先度**: 8件

---

## 🚀 次のステップ

### 現在の最優先課題（高優先度）
1. **ISSUE-022** X（Twitter）OAuth API認証の実装

### 次期実装優先順位（中優先度）
1. **ISSUE-014** セッションノート・ログシステム
2. **ISSUE-016** セッション素材管理システム
3. **ISSUE-006** グループ統計APIの詳細実装
4. **ISSUE-007** ユーザーランキングAPIの詳細実装

### 品質保証
- 各機能実装後は必ず統合テストを実行して動作確認
- **統合テスト成功率100%の維持**
