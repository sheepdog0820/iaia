# 🎯 Arkham Nexus - 課題管理チケット

## 📋 概要
統合テスト実施により判明した課題と今後の実装タスクを管理します。

**注意**: 完了済み課題は`ISSUES_CLOSED.md`に移動されています。

---

## 🔴 優先度: 高

### ISSUE-004: クトゥルフ神話TRPG 6版キャラクターシート機能強化
- **カテゴリ**: 新機能実装
- **影響範囲**: キャラクターシート機能
- **詳細**:
  - `CHARACTER_SHEET_COC6TH.md`仕様書に基づく機能拡張
  - 現在基本的なキャラクター作成は実装済み、詳細機能が未実装
- **該当ファイル**:
  - `accounts/character_models.py` - CharacterSheet, CharacterSkill, CharacterEquipment
  - `templates/accounts/character_sheet_6th.html` - 6版作成画面
  - `accounts/views/character_views.py` - CharacterSheetViewSet
- **実装内容**:
  - ✅ **基本キャラクター作成機能** - 実装済み
  - ✅ **CCFOLIA連携機能** - 実装済み（export_ccfolia_format）
  - ✅ **カスタム技能追加機能** - 実装済み（create_custom_skill）
  - ✅ **ダイスロール設定機能** - 実装済み（CharacterDiceRollSetting）
  - ✅ **バージョン管理機能** - 実装済み（CharacterVersionManager）
  - ✅ **職業テンプレート機能** - 部分実装（apply_occupation_template）
  - ✅ **技能ポイント管理システム** - 実装完了（2025年6月20日）
  - ✅ **戦闘データ管理** - 実装完了（2025年6月20日）
  - ✅ **所持品・装備管理** - 実装完了（2025年6月20日）
  - ✅ **背景情報詳細化** - 実装完了（2025年6月20日）
  - ❌ **成長記録システム** - モデル実装済み、UI未実装
- **更新日**: 2025年6月19日

### ISSUE-005: Tindalos統計APIの詳細実装
- **カテゴリ**: 機能強化
- **影響範囲**: 統計機能
- **詳細**:
  - `/api/accounts/statistics/tindalos/` - Tindalos指標API
  - 現在基本実装済み、詳細機能の追加が必要
- **該当ファイル**:
  - `accounts/statistics_views.py` - SimpleTindalosMetricsView実装済み
- **実装内容**:
  - ✅ **基本統計機能** - 実装済み
  - ✅ **年度・月別詳細集計** - 実装完了（2025年6月20日）
  - ✅ **ゲームシステム別統計** - 実装完了（2025年6月20日）
  - ✅ **期間指定フィルタ** - 実装完了（2025年6月20日）

---

## 🟡 優先度: 中

### ISSUE-006: グループ統計APIの詳細実装
- **カテゴリ**: 機能強化
- **影響範囲**: グループ管理機能
- **詳細**:
  - `/api/accounts/statistics/groups/` - グループ統計API
  - 現在基本実装済み、詳細機能の追加が必要
- **該当ファイル**:
  - `accounts/statistics_views.py` - GroupStatisticsView実装済み
- **実装内容**:
  - ✅ **基本グループ統計** - 実装済み
  - ❌ **グループ活動サマリー詳細** - 未実装
  - ❌ **メンバー参加率分析** - 未実装
  - ❌ **人気シナリオランキング** - 未実装

### ISSUE-007: ユーザーランキングAPIの詳細実装
- **カテゴリ**: 機能強化
- **影響範囲**: 統計機能
- **詳細**:
  - `/api/accounts/statistics/ranking/` - ユーザーランキングAPI
  - 現在基本実装済み、詳細機能の追加が必要
- **該当ファイル**:
  - `accounts/statistics_views.py` - UserRankingView実装済み
- **実装内容**:
  - ✅ **基本ランキング機能** - 実装済み
  - ❌ **期間別ランキング** - 未実装
  - ❌ **カテゴリ別ランキング** - 未実装
  - ❌ **ランキング推移** - 未実装

### ISSUE-008: カレンダー統合APIの実装
- **カテゴリ**: 新機能実装
- **影響範囲**: スケジュール管理機能
- **詳細**:
  - `/api/schedules/calendar/view/` - カレンダービューAPI
  - 現在Web画面は実装済み、API機能が未実装
- **該当ファイル**:
  - `schedules/views.py` - Web画面実装済み
- **実装内容**:
  - ✅ **カレンダーWeb画面** - 実装済み
  - ❌ **月別イベント一覧API** - 未実装
  - ❌ **セッション予定集約API** - 未実装
  - ❌ **iCal形式エクスポート** - 未実装


---

## 🟢 優先度: 低

### ISSUE-010: テストカバレッジの向上
- **カテゴリ**: テスト改善
- **影響範囲**: 全体
- **詳細**:
  - 現在基本テストは実装済み、詳細テストの追加が必要
- **該当ファイル**:
  - 各種テストファイル (test_*.py)
- **実装内容**:
  - ✅ **基本機能テスト** - 実装済み
  - ✅ **統合テスト** - 実装済み (100%成功率)
  - ❌ **境界値テスト** - 未実装
  - ❌ **エラーケーステスト強化** - 未実装
  - ❌ **パフォーマンステスト** - 未実装

### ISSUE-011: APIドキュメント自動生成
- **カテゴリ**: ドキュメント
- **影響範囲**: API全般
- **詳細**:
  - OpenAPI/Swagger対応でAPI仕様書の自動生成
- **実装内容**:
  - ❌ **drf-spectacular導入** - 未実装
  - ❌ **エンドポイント説明追加** - 未実装
  - ❌ **スキーマ生成設定** - 未実装

### ISSUE-012: 非同期処理の導入検討
- **カテゴリ**: パフォーマンス改善
- **影響範囲**: 統計処理、エクスポート機能
- **詳細**:
  - 重い統計処理やエクスポート処理の非同期化
- **実装内容**:
  - ❌ **Celery導入** - 未実装
  - ❌ **バックグラウンドタスク** - 未実装
  - ❌ **進捗表示機能** - 未実装

### ISSUE-013: 通知機能の拡張
- **カテゴリ**: 新機能実装
- **影響範囲**: 全体
- **詳細**:
  - 現在ハンドアウト通知機能は実装済み、他の通知機能の追加が必要
- **該当ファイル**:
  - `schedules/notification_views.py` - 基本実装済み
  - `schedules/models.py` - UserNotificationPreferences実装済み
- **実装内容**:
  - ✅ **ハンドアウト通知** - 実装済み
  - ❌ **セッション招待通知** - 未実装
  - ❌ **スケジュール変更通知** - 未実装
  - ❌ **フレンドリクエスト通知** - 未実装
  - ❌ **リアルタイム通知** - 未実装

---

## 📊 進捗管理

### 統合テスト結果サマリー (2025年6月18日最新)
- **総テストスイート数**: 16
- **成功**: 16 (100.0%)
- **失敗**: 0 (0.0%)
- **CCFOLIA専用テスト**: 28件全て成功

### 主要機能の動作確認状況
- ✅ ユーザー認証・権限管理
- ✅ セッション管理・参加者管理
- ✅ シナリオ管理・プレイ履歴
- ✅ グループ管理（プライベート・パブリック両対応）
- ✅ デモログイン機能
- ✅ APIエラーハンドリング
- ✅ ハンドアウト一括管理機能
- ✅ 統計・エクスポート機能（新仕様）
- ✅ CCFOLIA連携機能（完全実装）
- ✅ クトゥルフ神話TRPG 6版キャラクターシート（基本機能）
- ✅ 通知機能（ハンドアウト）
- ❌ カレンダー統合API
- ❌ 詳細統計機能（Tindalos拡張）

### 実装完了率
- **高優先度**: 2/2 (100%) - 残り2件が現在進行中
- **中優先度**: 0/3 (0%) - 全て未着手  
- **低優先度**: 0/4 (0%) - 全て未着手

### 完了済み課題
- **アーカイブ済み**: 4件 - `ISSUES_CLOSED.md`参照
- **完了期間**: 2024年6月14日〜2025年6月18日

---

## 🚀 次のステップ

### 現在の最優先課題
1. **ISSUE-004** クトゥルフ神話TRPG 6版キャラクターシート機能強化 - **🎯 最優先**
2. **ISSUE-005** Tindalos統計APIの詳細実装

### 次期実装優先順位  
3. **ISSUE-008** カレンダー統合APIの実装
4. **ISSUE-006** グループ統計APIの詳細実装
5. **ISSUE-007** ユーザーランキングAPIの詳細実装

### アーカイブ済み（完了）
- **ISSUE-001** パブリックグループ修正 → `ISSUES_CLOSED.md`
- **ISSUE-002** エクスポート機能API → `ISSUES_CLOSED.md`  
- **ISSUE-003** CCFOLIA連携機能 → `ISSUES_CLOSED.md`
- **ISSUE-009** ハンドアウト一括管理 → `ISSUES_CLOSED.md`

### 品質保証
- 各機能実装後は必ず統合テストを実行して動作確認
- **統合テスト成功率100%の維持**
- CCFOLIA連携機能のテストも継続実行