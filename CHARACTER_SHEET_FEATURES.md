# クトゥルフ神話TRPG キャラクターシート機能一覧

このドキュメントは、タブレノのキャラクターシート機能の一覧です。

## 完成度（更新: 2025-12-22）

凡例:
- [完了] 実装済み（UI/APIのいずれかで利用可能）
- [一部] 一部実装（バックエンドのみ/画面未配線/仕様との差分あり）
- [未] 未実装

カテゴリ別サマリー:
- 1. 基本情報管理: [完了]
- 2. 能力値システム: [一部]（ダイス設定の保存/読み込みはUI未配線）
- 3. 自動計算システム: [完了]
- 4. スキル管理システム: [一部]（自動配分、職業テンプレの推奨技能自動選択が未対応）
- 5. 戦闘・装備システム: [完了]
- 6. インベントリ・財産管理: [一部]（カテゴリー別クイック追加が未対応）
- 7. 背景情報: [完了]
- 8. 成長・経験システム: [完了]
- 9. バージョン管理: [一部]（ロールバック/比較はユーティリティ止まり）
- 10. 外部連携機能: [一部]（一括エクスポート未対応）
- 11. UI/UX機能: [一部]（ショートカット/折りたたみ等が未対応）
- 12. バリデーション・エラーハンドリング: [一部]（トースト等は画面により差分あり）
- 13. 高度な機能: [一部]（ダイス設定のUI管理が未対応）
- 14. API機能: [完了]

## 現在の完成度（要約）
- コア機能: CoC6版の作成〜成長記録の主要機能は完了
- 重点未完: UI未配線（ダイス設定保存/読み込み、推奨技能自動選択、一括エクスポート、バージョン比較/ロールバック）
- 高: X(Twitter) OAuth が無効化されており、Xログイン前提の運用は不可のまま。今後対応予定

## 機能カテゴリー別一覧

### 1. 基本情報管理
- [完了] キャラクター名（必須）
- [完了] プレイヤー名
- [完了] 年齢（15-90）
- [完了] 性別
- [完了] 職業
- [完了] 出身地
- [完了] 居住地
- [完了] 精神障害（6版専用）
- [完了] キャラクター画像（複数枚アップロード、メイン指定、並び替え、削除。詳細仕様は `CHARACTER_MULTIPLE_IMAGES_SPECIFICATION.md` を参照）

### 2. 能力値システム
- [完了] 8つの基本能力値（STR、CON、POW、DEX、APP、SIZ、INT、EDU）
- [一部] カスタマイズ可能なダイス設定
  - [完了] 能力値ごとの個別ダイス設定
  - [完了] 標準プリセット（3D6、2D6+6、3D6+3）
  - [一部] カスタムダイス式のサポート（XdY+Z 形式は対応、任意式は未対応）
  - [一部] ダイス設定の保存・読み込み（モデル/ユーティリティあり、UI未配線）
- [完了] ダイスロール機能
  - [完了] 個別能力値ロール
  - [完了] 全能力値一括ロール
  - [完了] ロール結果のアニメーション表示

### 3. 自動計算システム
- [完了] HP: (CON + SIZ) ÷ 2
- [完了] MP: POW
- [完了] SAN: POW × 5
- [完了] アイデアロール: INT × 5（6版）
- [完了] 幸運ロール: POW × 5（6版）
- [完了] 知識ロール: EDU × 5（6版）
- [完了] ダメージボーナス計算（STR+SIZベース）
- [完了] 移動率計算（DEX/SIZベース）
- [完了] 回避値: DEX × 2

### 4. スキル管理システム
- [一部] 8つのスキルカテゴリー（現状UIは主に5カテゴリで提供）
  - [完了] 戦闘系技能
  - [完了] 探索系技能
  - [完了] 行動系技能
  - [完了] 交渉系技能
  - [完了] 知識系技能
- [一部] スキルポイント管理
  - [完了] 職業ポイント 選択した数値で計算
    - [完了] 職業ポイント（EDU × 20）
    - [完了] 職業ポイント（EDU × 10 + STR × 10）
    - [完了] 職業ポイント（EDU × 10 + CON × 10）
    - [完了] 職業ポイント（EDU × 10 + POW × 10）
    - [完了] 職業ポイント（EDU × 10 + DEX × 10）
    - [完了] 職業ポイント（EDU × 10 + APP × 10）
    - [完了] 職業ポイント（EDU × 10 + SIZ × 10）
    - [完了] 職業ポイント（EDU × 10 + INT × 10）
  - [完了] 趣味ポイント（INT × 10）
  - [完了] ポイント配分追跡
  - [完了] 残りポイント表示
  - [未] 自動配分機能
  - [完了] ポイントリセット機能
- [完了] カスタムスキル追加
  - [完了] 専門分野付きスキル（芸術、製作等）
  - [完了] カスタムスキル名設定
- [一部] 職業テンプレート
  - [完了] 医師、教授、警官等のプリセット
  - [未] 推奨スキルの自動選択
  - [一部] 職業倍率の自動設定（一部テンプレのみ）
- [完了] スキル検索・フィルタリング
- [完了] スキル表示フィルタータブ
  - [完了] すべての技能表示
  - [完了] カテゴリー別表示（戦闘、探索、行動、交渉、知識）
  - [完了] ポイント振り分け済み技能のみ表示
  - [完了] タブ切り替えによる動的フィルタリング
- [完了] スキル初期値設定
  - [完了] 6版準拠の初期値自動設定
  - [完了] 回避（DEX×2）、母国語（EDU×5）の特殊計算
  - [完了] 初期値表示の見やすさ改善
  - [完了] 初期値は編集可能

### 5. 戦闘・装備システム
- [完了] 戦闘ステータス管理
  - [完了] 現在HP/最大HP
  - [完了] 現在MP/最大MP
  - [完了] 現在SAN/最大SAN
  - [完了] ダメージボーナス表示
  - [完了] 回避値表示
  - [完了] 移動率（通常/重荷/限界）
- [完了] 武器管理
  - [完了] 武器名
  - [完了] 使用技能
  - [完了] ダメージ式
  - [完了] 射程
  - [完了] 攻撃回数
  - [完了] 弾薬数
  - [完了] 故障ナンバー
  - [完了] 武器の追加・削除
- [完了] 防具システム
  - [完了] 防具名
  - [完了] 装甲値
  - [完了] 部位別メモ
  - [完了] 総装甲値計算
  - [完了] 防具の追加・削除

### 6. インベントリ・財産管理
- [完了] 財産管理
  - [完了] 所持金
  - [完了] 総資産
  - [完了] 年収
  - [完了] 不動産
  - [完了] 生活水準（貧困/一般/裕福/富豪）
- [一部] アイテム管理
  - [完了] カテゴリー分類
    - [完了] 武器
    - [完了] 防具
    - [完了] 道具
    - [完了] 書物
    - [完了] 補給品
    - [完了] その他
  - [完了] アイテム名
  - [完了] 数量管理
  - [完了] 重量管理
  - [完了] メモ機能
  - [完了] 運搬能力計算（STR × 3）
  - [完了] 過重ペナルティ表示
  - [未] カテゴリー別クイック追加

### 7. 背景情報
- [完了] 外見の描写
- [完了] 信念・信条
- [完了] 重要な人物
- [完了] 意味のある場所
- [完了] 宝物
- [完了] 特徴
- [完了] 個人的な経歴
- [完了] 重要な出来事
- [完了] 傷・瘢痕
- [完了] 恐怖症・マニア
- [完了] 仲間の探索者
- [完了] 備考（自由記述）

### 8. 成長・経験システム
- [完了] セッション記録
  - [完了] セッション日付
  - [完了] シナリオ名
  - [完了] GM名
  - [完了] SAN値の増減
  - [完了] 獲得経験点
  - [完了] 特別報酬
  - [完了] セッションメモ
- [完了] スキル成長記録
  - [完了] 成長日付
  - [完了] 成長対象スキル
  - [完了] 成長前の値
  - [完了] 成長後の値
  - [完了] 成長量
  - [完了] 成長ロール結果（成功/失敗）
  - [完了] 成長メモ
- [完了] 経験チェック管理

### 9. バージョン管理
- [一部] キャラクターバージョニング
  - [完了] セッション後の新バージョン作成
  - [完了] バージョン履歴表示
  - [完了] 親子バージョン関係
  - [完了] バージョンメモ
  - [完了] セッションカウント
  - [一部] 前バージョンへのロールバック（ユーティリティあり、API/UI未配線）
  - [一部] バージョン間比較（ユーティリティあり、API/UI未配線）
  - [完了] バージョン統計情報

### 10. 外部連携機能
- [一部] CCFOLIA連携
  - [完了] CCFOLIA形式でのエクスポート
  - [一部] 同期設定（有効/無効）（設定は保持、外部同期の自動連携は未対応）
  - [完了] キャラクターID管理
  - [完了] コマンド生成機能
  - [完了] ステータス・パラメータ出力
- [一部] データエクスポート
  - [一部] JSON形式エクスポート（APIレスポンスとして取得可、ダウンロード導線は限定的）
  - [完了] バージョンデータエクスポート
  - [未] 一括エクスポート機能

### 11. UI/UX機能
- [一部] 進捗管理
  - [完了] セクション完了インジケーター
  - [完了] メインプログレスバー
  - [完了] セクションナビゲーション
  - [完了] 必須フィールドハイライト
- [一部] レスポンシブデザイン
  - [完了] モバイル最適化レイアウト
  - [一部] タッチ対応コントロール
  - [一部] フローティング保存ボタン（画面により有無あり）
  - [未] 折りたたみ可能セクション
- [一部] アクセシビリティ
  - [未] キーボードショートカット（Ctrl+S、Alt+Tab）
  - [一部] ARIA属性（Bootstrap由来が中心）
  - [未] フォーカス管理
  - [未] スクリーンリーダー対応

### 12. バリデーション・エラーハンドリング
- [一部] リアルタイムバリデーション
  - [完了] 必須フィールドチェック
  - [完了] 数値範囲検証
  - [一部] 文字数制限（モデル側中心）
  - [一部] スキルポイント配分検証（残数表示は対応、厳密な拒否は画面差分あり）
- [一部] エラーフィードバック
  - [一部] トースト通知（画面により alert/Toast が混在）
  - [一部] フィールドレベルエラー
  - [未] フォームレベル検証サマリー
  - [完了] 成功確認メッセージ

### 13. 高度な機能
- [一部] ダイス設定管理
  - [一部] カスタムダイス設定の保存（モデル/ユーティリティあり、UI未配線）
  - [完了] ユーザーごとの複数プリセット
  - [一部] 設定のインポート/エクスポート（ユーティリティあり、UI未配線）
  - [完了] デフォルト設定管理

### 14. API機能
- [完了] RESTful API
  - [完了] キャラクターシートCRUD
  - [完了] バージョン管理API
  - [完了] スキル管理API
  - [完了] 装備管理API
  - [完了] 成長記録API
- [完了] アクションエンドポイント
  - [完了] `/skill_points_summary/` - スキルポイント情報取得
  - [完了] `/allocate_skill_points/` - スキルポイント配分
  - [完了] `/combat_summary/` - 戦闘データ取得
  - [完了] `/financial_summary/` - 財産情報取得
  - [完了] `/inventory_summary/` - インベントリ情報取得
  - [完了] `/background_summary/` - 背景情報取得
  - [完了] `/growth_records/` - 成長記録取得
  - [完了] `/ccfolia_json/` - CCFOLIA形式エクスポート

## 技術仕様

### フロントエンド
- HTML5 + Bootstrap 5
- Vanilla JavaScript（ES6+）
- AJAX通信（Axios）
- レスポンシブデザイン

### バックエンド
- Django 4.2+
- Django REST Framework
- PostgreSQL/SQLite
- Redis（キャッシュ）

### セキュリティ
- CSRF保護
- XSS対策
- 認証・認可
- 入力検証

### パフォーマンス
- キャッシュ戦略
- 画像最適化

## 注意事項

このキャラクターシート機能は**クトゥルフ神話TRPG 6版**です。他のTRPGシステム（D&D、ソード・ワールド等）には対応していません。
