# 🎲 クトゥルフ神話TRPG キャラクターシート機能一覧

このドキュメントは、Arkham Nexusのキャラクターシート機能の完全な一覧です。

## 📋 機能カテゴリー別一覧

### 1. 基本情報管理
- ✅ キャラクター名（必須）
- ✅ プレイヤー名
- ✅ 年齢（15-90）
- ✅ 性別
- ✅ 職業
- ✅ 出身地
- ✅ 居住地
- ✅ 精神障害（6版専用）
- ✅ キャラクター画像（複数枚アップロード、メイン指定、並び替え、削除。詳細仕様は `CHARACTER_MULTIPLE_IMAGES_SPECIFICATION.md` を参照）

### 2. 能力値システム
- ✅ 8つの基本能力値（STR、CON、POW、DEX、APP、SIZ、INT、EDU）
- ✅ カスタマイズ可能なダイス設定
  - ✅ 能力値ごとの個別ダイス設定
  - ✅ 標準プリセット（3D6、2D6+6、3D6+3）
  - ✅ カスタムダイス式のサポート
  - ✅ ダイス設定の保存・読み込み
- ✅ ダイスロール機能
  - ✅ 個別能力値ロール
  - ✅ 全能力値一括ロール
  - ✅ ロール結果のアニメーション表示

### 3. 自動計算システム
- ✅ HP: (CON + SIZ) ÷ 2
- ✅ MP: POW
- ✅ SAN: POW × 5
- ✅ アイデアロール: INT × 5（6版）
- ✅ 幸運ロール: POW × 5（6版）
- ✅ 知識ロール: EDU × 5（6版）
- ✅ ダメージボーナス計算（STR+SIZベース）
- ✅ 移動率計算（DEX/SIZベース）
- ✅ 回避値: DEX × 2

### 4. スキル管理システム
- ✅ 8つのスキルカテゴリー
  - ✅ 戦闘系技能
  - ✅ 探索系技能
  - ✅ 行動系技能
  - ✅ 交渉系技能
  - ✅ 知識系技能
- ✅ スキルポイント管理
  - ✅ 職業ポイント 選択した数値で計算
    - ✅ 職業ポイント（EDU × 20）
    - ✅ 職業ポイント（EDU × 10 + STR × 10）
    - ✅ 職業ポイント（EDU × 10 + CON × 10）
    - ✅ 職業ポイント（EDU × 10 + POW × 10）
    - ✅ 職業ポイント（EDU × 10 + DEX × 10）
    - ✅ 職業ポイント（EDU × 10 + APP × 10）
    - ✅ 職業ポイント（EDU × 10 + SIZ × 10）
    - ✅ 職業ポイント（EDU × 10 + INT × 10）
  - ✅ 趣味ポイント（INT × 10）
  - ✅ ポイント配分追跡
  - ✅ 残りポイント表示
  - ✅ 自動配分機能
  - ✅ ポイントリセット機能
- ✅ カスタムスキル追加
  - ✅ 専門分野付きスキル（芸術、製作等）
  - ✅ カスタムスキル名設定
- ✅ 職業テンプレート
  - ✅ 医師、教授、警官等のプリセット
  - ✅ 推奨スキルの自動選択
  - ✅ 職業倍率の自動設定
- ✅ スキル検索・フィルタリング
- ✅ スキル表示フィルタータブ
  - ✅ すべての技能表示
  - ✅ カテゴリー別表示（戦闘、探索、行動、交渉、知識 ）
  - ✅ ポイント振り分け済み技能のみ表示
  - ✅ タブ切り替えによる動的フィルタリング
- ✅ スキル初期値設定
  - ✅ 6版準拠の初期値自動設定
  - ✅ 回避（DEX×2）、母国語（EDU×5）の特殊計算
  - ✅ 初期値表示の見やすさ改善
  - ✅ 初期値は編集可能

### 5. 戦闘・装備システム
- ✅ 戦闘ステータス管理
  - ✅ 現在HP/最大HP
  - ✅ 現在MP/最大MP
  - ✅ 現在SAN/最大SAN
  - ✅ ダメージボーナス表示
  - ✅ 回避値表示
  - ✅ 移動率（通常/重荷/限界）
- ✅ 武器管理
  - ✅ 武器名
  - ✅ 使用技能
  - ✅ ダメージ式
  - ✅ 射程
  - ✅ 攻撃回数
  - ✅ 弾薬数
  - ✅ 故障ナンバー
  - ✅ 武器の追加・削除
- ✅ 防具システム
  - ✅ 防具名
  - ✅ 装甲値
  - ✅ 部位別メモ
  - ✅ 総装甲値計算
  - ✅ 防具の追加・削除

### 6. インベントリ・財産管理
- ✅ 財産管理
  - ✅ 所持金
  - ✅ 総資産
  - ✅ 年収
  - ✅ 不動産
  - ✅ 生活水準（貧困/一般/裕福/富豪）
- ✅ アイテム管理
  - ✅ カテゴリー分類
    - ✅ 武器
    - ✅ 防具
    - ✅ 道具
    - ✅ 書物
    - ✅ 補給品
    - ✅ その他
  - ✅ アイテム名
  - ✅ 数量管理
  - ✅ 重量管理
  - ✅ メモ機能
  - ✅ 運搬能力計算（STR × 3）
  - ✅ 過重ペナルティ表示
  - ✅ カテゴリー別クイック追加

### 7. 背景情報
- ✅ 外見の描写
- ✅ 信念・信条
- ✅ 重要な人物
- ✅ 意味のある場所
- ✅ 宝物
- ✅ 特徴
- ✅ 個人的な経歴
- ✅ 重要な出来事
- ✅ 傷・瘢痕
- ✅ 恐怖症・マニア
- ✅ 仲間の探索者
- ✅ 備考（自由記述）

### 8. 成長・経験システム
- ✅ セッション記録
  - ✅ セッション日付
  - ✅ シナリオ名
  - ✅ GM名
  - ✅ SAN値の増減
  - ✅ 獲得経験点
  - ✅ 特別報酬
  - ✅ セッションメモ
- ✅ スキル成長記録
  - ✅ 成長日付
  - ✅ 成長対象スキル
  - ✅ 成長前の値
  - ✅ 成長後の値
  - ✅ 成長量
  - ✅ 成長ロール結果（成功/失敗）
  - ✅ 成長メモ
- ✅ 経験チェック管理

### 9. バージョン管理
- ✅ キャラクターバージョニング
  - ✅ セッション後の新バージョン作成
  - ✅ バージョン履歴表示
  - ✅ 親子バージョン関係
  - ✅ バージョンメモ
  - ✅ セッションカウント
  - ✅ 前バージョンへのロールバック
  - ✅ バージョン間比較
  - ✅ バージョン統計情報

### 10. 外部連携機能
- ✅ CCFOLIA連携
  - ✅ CCFOLIA形式でのエクスポート
  - ✅ 同期設定（有効/無効）
  - ✅ キャラクターID管理
  - ✅ コマンド生成機能
  - ✅ ステータス・パラメータ出力
- ✅ データエクスポート
  - ✅ JSON形式エクスポート
  - ✅ バージョンデータエクスポート
  - ✅ 一括エクスポート機能

### 11. UI/UX機能
- ✅ 進捗管理
  - ✅ セクション完了インジケーター
  - ✅ メインプログレスバー
  - ✅ セクションナビゲーション
  - ✅ 必須フィールドハイライト
- ✅ レスポンシブデザイン
  - ✅ モバイル最適化レイアウト
  - ✅ タッチ対応コントロール
  - ✅ フローティング保存ボタン
  - ✅ 折りたたみ可能セクション
- ✅ アクセシビリティ
  - ✅ キーボードショートカット（Ctrl+S、Alt+Tab）
  - ✅ ARIA属性
  - ✅ フォーカス管理
  - ✅ スクリーンリーダー対応

### 12. バリデーション・エラーハンドリング
- ✅ リアルタイムバリデーション
  - ✅ 必須フィールドチェック
  - ✅ 数値範囲検証
  - ✅ 文字数制限
  - ✅ スキルポイント配分検証
- ✅ エラーフィードバック
  - ✅ トースト通知
  - ✅ フィールドレベルエラー
  - ✅ フォームレベル検証サマリー
  - ✅ 成功確認メッセージ

### 13. 高度な機能
- ✅ ダイス設定管理
  - ✅ カスタムダイス設定の保存
  - ✅ ユーザーごとの複数プリセット
  - ✅ 設定のインポート/エクスポート
  - ✅ デフォルト設定管理

### 14. API機能
- ✅ RESTful API
  - ✅ キャラクターシートCRUD
  - ✅ バージョン管理API
  - ✅ スキル管理API
  - ✅ 装備管理API
  - ✅ 成長記録API
- ✅ アクションエンドポイント
  - ✅ `/skill_points_summary/` - スキルポイント情報取得
  - ✅ `/allocate_skill_points/` - スキルポイント配分
  - ✅ `/combat_summary/` - 戦闘データ取得
  - ✅ `/financial_summary/` - 財産情報取得
  - ✅ `/inventory_summary/` - インベントリ情報取得
  - ✅ `/background_summary/` - 背景情報取得
  - ✅ `/growth_records/` - 成長記録取得
  - ✅ `/ccfolia_json/` - CCFOLIA形式エクスポート

## 🔧 技術仕様

### フロントエンド
- HTML5 + Bootstrap 5
- Vanilla JavaScript（ES6+）
- AJAX通信（Axios）
- レスポンシブデザイン

### バックエンド
- Django 4.2+
- Django REST Framework
- PostgreSQL/SQLite
- Redis（キャッシュ）

### セキュリティ
- CSRF保護
- XSS対策
- 認証・認可
- 入力検証

### パフォーマンス
- キャッシュ戦略
- 画像最適化

## 📝 注意事項

このキャラクターシート機能は**クトゥルフ神話TRPG 6版**です。他のTRPGシステム（D&D、ソード・ワールド等）には対応していません。
