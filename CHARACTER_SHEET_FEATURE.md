# キャラクターシート作成機能

## 📋 概要

Arkham Nexus に新しくキャラクターシート作成機能を追加しました。この機能により、ユーザーは詳細なTRPGキャラクターを作成・管理することができます。

## 🎯 主な機能

### ✨ **基本機能**
- **多システム対応**: クトゥルフ神話TRPG、D&D 5e、Pathfinder、シャドウラン等に対応
- **自動計算**: 副能力値（HP、MP、SAN）の自動計算
- **ランダム生成**: 3D6×5による能力値のランダム生成
- **下書き保存**: LocalStorageを使用した自動下書き保存
- **JSONエクスポート**: 作成したキャラクターシートのダウンロード

### 🎨 **ユーザーインターフェース**
- **レスポンシブデザイン**: PC・タブレット・スマートフォン対応
- **視覚的分類**: 能力値、技能値を色分けして表示
- **アイコン統合**: Font Awesomeアイコンによる直感的なUI
- **グラデーション**: 美しいカラーテーマの採用

## 🗺️ アクセス方法

### **ホーム画面から**
1. ホーム画面の「クイックアクション」セクション
2. 🥷 **キャラクター作成** ボタンをクリック

### **ナビゲーションメニューから**
1. 右上のユーザーメニューをクリック
2. 「🥷 キャラクター作成」を選択

### **直接URL**
```
http://localhost:8080/accounts/character/create/
```

## 📊 入力項目

### **基本情報**
- **ゲームシステム**: システム選択（必須）
- **キャラクター名**: キャラクター名（必須）
- **年齢**: キャラクターの年齢
- **職業**: キャラクターの職業
- **出身地**: 出身地・故郷

### **能力値** (クトゥルフ神話TRPG準拠)
- **STR** (筋力): 物理的な力
- **CON** (体力): 持久力・生命力
- **POW** (精神力): 意志力・魔力
- **DEX** (敏捷性): 反応速度・器用さ
- **APP** (外見): 魅力・美しさ
- **SIZ** (体格): 身長・体重
- **INT** (知性): 学習能力・記憶力
- **EDU** (教育): 学歴・知識

### **副能力値** (自動計算)
- **HP** (耐久力): (CON + SIZ) ÷ 10 (端数切り上げ)
- **MP** (マジックポイント): POW ÷ 5 (端数切り捨て)
- **SAN** (正気度): POW値
- **幸運**: 3D6 × 5 (手動入力またはランダム生成)

### **主要技能**
基本的なTRPG技能：
- 回避、格闘、拳銃、目星、聞き耳
- 心理学、応急手当、図書館、説得、威圧

### **背景・設定**
- **背景・経歴**: キャラクターの生い立ち
- **性格・特徴**: 個性や癖
- **信念・理想**: 大切にしている価値観
- **重要な人物・場所**: 関係性や思い出
- **所持品・装備**: 装備や道具

## 🔧 機能詳細

### **ランダム生成機能**
```javascript
// 3D6 × 5 による能力値生成
const roll1 = Math.floor(Math.random() * 6) + 1;
const roll2 = Math.floor(Math.random() * 6) + 1;
const roll3 = Math.floor(Math.random() * 6) + 1;
const total = (roll1 + roll2 + roll3) * 5;
```

### **自動計算機能**
```javascript
// HP = (CON + SIZ) / 10 (端数切り上げ)
const hp = Math.ceil((con + siz) / 10);

// MP = POW / 5 (端数切り捨て)
const mp = Math.floor(pow / 5);

// SAN = POW
const san = pow;
```

### **下書き保存機能**
- LocalStorageを使用
- ページリロード時に自動復元
- 保存ボタンクリックで手動保存
- キャラクター作成完了時に自動クリア

### **データエクスポート**
- JSON形式でダウンロード
- ファイル名: `{キャラクター名}_character_sheet.json`
- 全入力データを構造化して保存

## 🎨 デザイン仕様

### **カラーパレット**
- **能力値**: 緑系（#28a745）
- **技能値**: 黄系（#ffc107）
- **基本情報**: 青系（#007bff）
- **副能力値**: 青緑系（#17a2b8）
- **背景**: 赤系（#dc3545）
- **装備**: グレー系（#6c757d）

### **レスポンシブブレークポイント**
- **デスクトップ**: col-lg-10 (大画面用レイアウト)
- **タブレット**: col-md-6 (2列表示)
- **モバイル**: col-12 (1列表示)

## 🔗 技術仕様

### **フロントエンド**
- **HTML5**: セマンティックマークアップ
- **Bootstrap 5**: レスポンシブデザイン
- **Font Awesome**: アイコンライブラリ
- **Vanilla JavaScript**: インタラクティブ機能

### **バックエンド**
- **Django URLs**: `/accounts/character/create/`
- **Template**: `accounts/character_sheet.html`
- **認証**: `@login_required` デコレータ

### **データ保存**
- **LocalStorage**: 下書き保存
- **JSON Export**: 完成データのダウンロード
- **将来対応**: データベース保存（API拡張予定）

## 🚀 今後の拡張予定

### **Phase 2: データベース統合**
- キャラクターシートの永続化
- ユーザー間でのシート共有
- セッション参加時の自動適用

### **Phase 3: システム拡張**
- D&D 5e専用フォーム
- Pathfinder対応
- カスタムシステム作成

### **Phase 4: 高度な機能**
- キャラクターイラスト添付
- 成長記録の管理
- ダイスロール統合

## 📱 ユーザーガイド

### **基本的な作成手順**
1. システム選択とキャラクター名入力
2. 能力値の手動入力またはランダム生成
3. 技能値の設定
4. 背景・設定の記入
5. 「キャラクター作成」でJSONダウンロード

### **ランダム生成の使用方法**
1. 「🪄 ランダム生成」ボタンクリック
2. 確認ダイアログで「OK」
3. 全能力値と基本技能が自動設定
4. 必要に応じて手動調整

### **下書き保存の活用**
1. 「💾 下書き保存」で一時保存
2. ページを閉じても次回復元
3. 長時間の作成作業に最適

## 🎯 活用シーン

### **新規キャラクター作成**
- セッション参加前の事前準備
- 新しいキャンペーンの開始
- バックアップキャラクターの作成

### **既存キャラクターの記録**
- 既存の紙のシートのデジタル化
- オンラインセッション用の準備
- キャラクター情報の整理

### **GM用途**
- NPC作成
- プレロールドキャラクター準備
- セッション用サンプルキャラクター

## 📊 テスト済み環境

- ✅ **Chrome**: 最新版対応
- ✅ **Firefox**: 最新版対応  
- ✅ **Safari**: モバイル含む対応
- ✅ **Edge**: 最新版対応
- ✅ **モバイル**: iOS/Android対応

この機能により、Arkham Nexus はより包括的なTRPG管理プラットフォームとして進化しました！